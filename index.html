<!DOCTYPE html>
<html lang="en">
<head>
  <!--
Made by THE KNIGHTS
Website: www.theknight.info
Don't copy without permission 🙏
-->

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hindi-English Dictation Master</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Noto+Sans+Devanagari:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }
    
    body {
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
      min-height: 100vh;
      font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      transition: background 0.5s ease;
      overflow-x: hidden;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    
    body.dark-mode {
      background: linear-gradient(135deg, #0a122e, #4a0a0a, #0a122e);
    }
    
    /* Main Container */
    .container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 25px;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      width: 100%;
      max-width: 1200px;
      padding: 40px;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(10px);
      transition: all 0.5s ease;
      z-index: 10;
    }
    
    body.dark-mode .container {
      background: rgba(30, 30, 40, 0.95);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(80, 80, 100, 0.3);
    }
    
    /* Header Styles */
    .header {
      text-align: center;
      margin-bottom: 40px;
      position: relative;
      padding-bottom: 25px;
      border-bottom: 2px solid rgba(26, 42, 108, 0.1);
      padding-top: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    body.dark-mode .header {
      border-bottom: 2px solid rgba(100, 100, 150, 0.2);
    }
    
    .made-by {
      position: absolute;
      top: -15px;
      left: 20px;
      background: linear-gradient(45deg, #1a2a6c, #b21f1f);
      color: white;
      padding: 8px 20px;
      border-radius: 0 0 15px 15px;
      font-weight: 600;
      font-size: 1.1rem;
      letter-spacing: 1px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 10;
    }
    
    /* Theme toggle moved to top-right */
    .theme-toggle {
      position: absolute;
      top: 15px;
      right: 20px;
      background: rgba(26, 42, 108, 0.1);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 10;
    }
    
    .theme-toggle:hover {
      background: rgba(26, 42, 108, 0.2);
      transform: rotate(15deg);
    }
    
    body.dark-mode .theme-toggle {
      background: rgba(200, 200, 255, 0.1);
    }
    
    .header h1 {
      font-size: 2.8rem;
      margin: 10px 0 15px;
      color: #2c3e50;
      background: linear-gradient(45deg, #1a2a6c, #b21f1f);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      font-weight: 800;
      transition: all 0.3s ease;
      padding-top: 10px;
    }
    
    body.dark-mode .header h1 {
      background: linear-gradient(45deg, #5d8eff, #ff6b6b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .header p {
      color: #5a6268;
      font-size: 1.3rem;
      max-width: 700px;
      margin: 0 auto;
      font-weight: 400;
      transition: color 0.3s ease;
      line-height: 1.6;
    }
    
    body.dark-mode .header p {
      color: #b0b8c0;
    }
    
    /* User Section Styles */
    .user-section {
      display: flex;
      gap: 15px;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
    }
    
    .user-btn {
      padding: 12px 25px;
      background: linear-gradient(to right, #8e44ad, #9b59b6);
      border: none;
      border-radius: 50px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    
    .user-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    }
    
    .user-info {
      display: flex;
      align-items: center;
      gap: 15px;
      color: white;
      background: rgba(26, 42, 108, 0.3);
      padding: 8px 20px;
      border-radius: 50px;
      font-weight: 500;
      backdrop-filter: blur(5px);
    }
    
    body.dark-mode .user-info {
      background: rgba(93, 142, 255, 0.2);
    }
    
    .logout-btn {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      font-size: 1.1rem;
      transition: transform 0.3s ease;
    }
    
    .logout-btn:hover {
      transform: rotate(15deg);
    }
    
    /* Content Layout - Modified for new structure */
    .content-container {
      display: flex;
      flex-direction: column;
      gap: 30px;
      margin-bottom: 30px;
    }
    
    .main-content {
      display: flex;
      gap: 30px;
    }
    
    .left-panel {
      flex: 1;
    }
    
    .right-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    
    /* Language Selector */
    .language-selector {
      display: flex;
      background-color: #f1f2f6;
      border-radius: 50px;
      padding: 8px;
      margin-bottom: 30px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.08);
      border: 1px solid rgba(0,0,0,0.05);
      transition: all 0.3s ease;
    }
    
    body.dark-mode .language-selector {
      background-color: #2a2a3a;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .lang-btn {
      flex: 1;
      padding: 16px 25px;
      border: none;
      border-radius: 50px;
      background: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1.2rem;
      position: relative;
      overflow: hidden;
      z-index: 1;
      color: #2c3e50;
    }
    
    body.dark-mode .lang-btn {
      color: #e0e0f0;
    }
    
    .lang-btn:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to right, #ff6b6b, #ff8e53);
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: -1;
    }
    
    .lang-btn.active {
      color: white;
    }
    
    .lang-btn.active:before {
      opacity: 1;
    }
    
    .lang-btn span {
      position: relative;
      transition: transform 0.3s ease;
    }
    
    .lang-btn:hover span {
      transform: translateY(-3px);
    }
    
    /* Input Section */
    .input-section {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
      background: #f8f9fa;
      padding: 30px;
      border-radius: 25px;
      box-shadow: inset 0 3px 8px rgba(0,0,0,0.05);
      border: 1px solid #e9ecef;
      transition: all 0.3s ease;
      flex-wrap: wrap;
      position: relative;
    }
    
    body.dark-mode .input-section {
      background: #2a2a3a;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .input-section input {
      flex: 1;
      padding: 18px 28px;
      border: 2px solid #e0e0e0;
      border-radius: 50px;
      font-size: 1.2rem;
      transition: all 0.3s ease;
      box-shadow: 0 3px 8px rgba(0,0,0,0.05);
      font-family: 'Noto Sans Devanagari', 'Poppins', sans-serif;
      min-width: 200px;
    }
    
    body.dark-mode .input-section input {
      background: #1e1e2a;
      border: 2px solid #3a3a4a;
      color: #f0f0f8;
      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    }
    
    .input-section input:focus {
      border-color: #3498db;
      outline: none;
      box-shadow: 0 0 15px rgba(52, 152, 219, 0.5);
    }
    
    body.dark-mode .input-section input:focus {
      border-color: #5d8eff;
      box-shadow: 0 0 15px rgba(93, 142, 255, 0.5);
    }
    
    /* Buttons */
    .btn {
      padding: 18px 40px;
      background: linear-gradient(to right, #3498db, #2ecc71);
      border: none;
      border-radius: 50px;
      color: white;
      font-weight: 600;
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 6px 15px rgba(52, 152, 219, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      position: relative;
      overflow: hidden;
      z-index: 1;
    }
    
    .btn:after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to right, #2ecc71, #3498db);
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: -1;
    }
    
    .btn:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 25px rgba(52, 152, 219, 0.6);
    }
    
    .btn:hover:after {
      opacity: 1;
    }
    
    .btn:active {
      transform: translateY(1px);
    }
    
    .btn i {
      transition: transform 0.3s ease;
    }
    
    .btn:hover i {
      transform: scale(1.2);
    }
    
    .btn-play-all {
      background: linear-gradient(to right, #9b59b6, #8e44ad);
      margin-top: 25px;
      width: 100%;
      padding: 22px;
      font-size: 1.3rem;
      position: relative;
    }
    
    .btn-play-all:after {
      background: linear-gradient(to right, #8e44ad, #9b59b6);
    }
    
    /* Words Container */
    .words-container {
      background-color: #f8f9fa;
      border-radius: 25px;
      padding: 30px;
      max-height: 500px;
      overflow-y: auto;
      box-shadow: inset 0 3px 8px rgba(0,0,0,0.05);
      border: 1px solid #e9ecef;
      scrollbar-width: thin;
      scrollbar-color: #3498db #f1f2f6;
      transition: all 0.3s ease;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }
    
    body.dark-mode .words-container {
      background: #2a2a3a;
      border: 1px solid rgba(255, 255, 255, 0.1);
      scrollbar-color: #5d8eff #2a2a3a;
    }
    
    .words-container::-webkit-scrollbar {
      width: 10px;
    }
    
    .words-container::-webkit-scrollbar-track {
      background: #f1f2f6;
      border-radius: 10px;
    }
    
    body.dark-mode .words-container::-webkit-scrollbar-track {
      background: #2a2a3a;
    }
    
    .words-container::-webkit-scrollbar-thumb {
      background: linear-gradient(to bottom, #3498db, #2ecc71);
      border-radius: 10px;
    }
    
    body.dark-mode .words-container::-webkit-scrollbar-thumb {
      background: linear-gradient(to bottom, #5d8eff, #8e44ad);
    }
    
    /* Enhanced Empty State */
    .empty-state {
      text-align: center;
      padding: 50px 30px;
      color: #5a6268;
      border-radius: 25px;
      background: rgba(255, 255, 255, 0.7);
      transition: all 0.3s ease;
      grid-column: 1 / -1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 350px;
      background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(240,245,255,0.9));
      border: 2px dashed #c0c8d0;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      position: relative;
      overflow: hidden;
    }
    
    body.dark-mode .empty-state {
      background: linear-gradient(135deg, rgba(40, 40, 55, 0.8), rgba(30, 35, 60, 0.8));
      border: 2px dashed rgba(100, 100, 150, 0.5);
      color: #c0c8d0;
    }
    
    .empty-state i {
      font-size: 5rem;
      margin-bottom: 25px;
      color: #adb5bd;
      opacity: 0.8;
      transition: all 0.5s ease;
      position: relative;
      z-index: 2;
    }
    
    .empty-state:hover i {
      transform: translateY(-5px) scale(1.1);
      color: #3498db;
    }
    
    body.dark-mode .empty-state:hover i {
      color: #5d8eff;
    }
    
    .empty-state p {
      font-size: 1.8rem;
      margin-top: 15px;
      font-weight: 600;
      max-width: 600px;
      line-height: 1.4;
      z-index: 2;
    }
    
    .empty-state .subtext {
      font-size: 1.2rem;
      margin-top: 15px;
      color: #6c757d;
      font-weight: 400;
      max-width: 500px;
      z-index: 2;
    }
    
    body.dark-mode .empty-state .subtext {
      color: #a0a8b0;
    }
    
    .empty-state:before {
      content: "";
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(200,200,255,0.1) 0%, transparent 70%);
      animation: rotate 20s linear infinite;
      z-index: 1;
    }
    
    body.dark-mode .empty-state:before {
      background: radial-gradient(circle, rgba(93,142,255,0.1) 0%, transparent 70%);
    }
    
    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Controls */
    .controls {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 30px;
      background: #f8f9fa;
      padding: 30px;
      border-radius: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      border: 1px solid #e9ecef;
      transition: all 0.3s ease;
    }
    
    body.dark-mode .controls {
      background: #2a2a3a;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    /* SPEED LABEL */
    .speed-label {
      text-align: center;
      font-size: 1.5rem;
      font-weight: 700;
      color: #1a2a6c;
      margin-bottom: 15px;
      text-transform: uppercase;
      letter-spacing: 1px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    body.dark-mode .speed-label {
      color: #5d8eff;
    }
    
    .speed-control {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 25px;
      background: linear-gradient(to bottom, #e3f2fd, #f1f8fe);
      padding: 18px 35px;
      border-radius: 25px;
      box-shadow: 0 8px 15px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }
    
    body.dark-mode .speed-control {
      background: linear-gradient(to bottom, #1a1a2a, #252538);
    }
    
    .speed-control label {
      font-weight: 600;
      color: #2c3e50;
      font-size: 1.3rem;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: color 0.3s ease;
      min-width: 120px;
    }
    
    body.dark-mode .speed-control label {
      color: #e0e0f0;
    }
    
    .speed-control input {
      width: 250px;
      height: 15px;
      -webkit-appearance: none;
      background: linear-gradient(to right, #1a2a6c, #3498db);
      border-radius: 10px;
      outline: none;
    }
    
    body.dark-mode .speed-control input {
      background: linear-gradient(to right, #0a122e, #5d8eff);
    }
    
    .speed-control input::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: white;
      border: 4px solid #3498db;
      cursor: pointer;
      box-shadow: 0 3px 10px rgba(0,0,0,0.3);
      transition: all 0.2s ease;
    }
    
    body.dark-mode .speed-control input::-webkit-slider-thumb {
      border: 4px solid #5d8eff;
      background: #e0e0f0;
    }
    
    .speed-control input::-webkit-slider-thumb:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    
    #speedValue {
      min-width: 65px;
      font-weight: 700;
      color: #1a2a6c;
      font-size: 1.4rem;
      background: rgba(26, 42, 108, 0.1);
      padding: 8px 15px;
      border-radius: 30px;
      transition: all 0.3s ease;
    }
    
    body.dark-mode #speedValue {
      color: #5d8eff;
      background: rgba(93, 142, 255, 0.1);
    }
    
    /* Instructions - Moved below */
    .instructions {
      background: #f8f9fa;
      border-radius: 25px;
      padding: 30px 35px;
      font-size: 1.2rem;
      line-height: 1.7;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      border: 1px solid #e9ecef;
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
      margin-top: 30px;
    }
    
    body.dark-mode .instructions {
      background: #2a2a3a;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .instructions:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 6px;
      height: 100%;
      background: linear-gradient(to bottom, #3498db, #2ecc71);
    }
    
    body.dark-mode .instructions:before {
      background: linear-gradient(to bottom, #5d8eff, #8e44ad);
    }
    
    .instructions h3 {
      margin-bottom: 20px;
      color: #2c3e50;
      display: flex;
      align-items: center;
      gap: 15px;
      font-size: 1.5rem;
      transition: color 0.3s ease;
    }
    
    body.dark-mode .instructions h3 {
      color: #e0e0f0;
    }
    
    .instructions ul {
      padding-left: 35px;
    }
    
    .instructions li {
      margin-bottom: 15px;
      position: relative;
      color: #5a6268;
      transition: color 0.3s ease;
      font-size: 1.15rem;
    }
    
    body.dark-mode .instructions li {
      color: #b0b8c0;
    }
    
    .instructions li:before {
      content: '•';
      color: #1a2a6c;
      font-weight: bold;
      position: absolute;
      left: -25px;
      top: 0;
      transition: color 0.3s ease;
    }
    
    body.dark-mode .instructions li:before {
      color: #5d8eff;
    }
    
    .instructions li strong {
      color: #1a2a6c;
      font-weight: 600;
      transition: color 0.3s ease;
    }
    
    body.dark-mode .instructions li strong {
      color: #5d8eff;
    }
    
    /* Preset Speeds */
    .preset-speeds {
      display: flex;
      justify-content: space-between;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .preset-btn {
      padding: 14px 25px;
      background: linear-gradient(to right, #9b59b6, #8e44ad);
      border: none;
      border-radius: 50px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 12px rgba(0,0,0,0.2);
      font-size: 1.1rem;
      position: relative;
      overflow: hidden;
      z-index: 1;
      flex: 1;
      text-align: center;
    }
    
    .preset-btn:after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to right, #8e44ad, #9b59b6);
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: -1;
    }
    
    .preset-btn:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 18px rgba(0,0,0,0.3);
    }
    
    .preset-btn:hover:after {
      opacity: 1;
    }
    
    .preset-btn.active {
      background: linear-gradient(to right, #e74c3c, #c0392b);
      box-shadow: 0 0 0 4px rgba(231, 76, 60, 0.3);
    }
    
    .preset-btn.active:after {
      background: linear-gradient(to right, #c0392b, #e74c3c);
    }
    
    /* Footer */
    footer {
      text-align: center;
      margin-top: 35px;
      color: #6c757d;
      font-size: 1.1rem;
      padding: 20px;
      border-top: 1px solid rgba(0,0,0,0.1);
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    body.dark-mode footer {
      color: #a0a8b0;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    /* Google Lens Button */
    .lens-btn {
      background: linear-gradient(to right, #FF5722, #FF9800);
      padding: 18px 35px;
      border-radius: 50px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 6px 15px rgba(255, 87, 34, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      position: relative;
      overflow: hidden;
      z-index: 1;
      border: none;
      width: 100%;
      margin-bottom: 15px;
    }
    
    .lens-btn:after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to right, #FF9800, #FF5722);
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: -1;
    }
    
    .lens-btn:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 25px rgba(255, 87, 34, 0.6);
    }
    
    .lens-btn:hover:after {
      opacity: 1;
    }
    
    /* Authentication Modal */
    .auth-modal {
      display: flex;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      justify-content: center;
      align-items: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease;
    }
    
    .auth-modal.show {
      opacity: 1;
      pointer-events: all;
    }
    
    .auth-content {
      background: white;
      border-radius: 25px;
      padding: 40px;
      width: 90%;
      max-width: 450px;
      position: relative;
      box-shadow: 0 20px 50px rgba(0,0,0,0.5);
      transform: translateY(30px);
      transition: transform 0.4s ease;
    }
    
    .auth-modal.show .auth-content {
      transform: translateY(0);
    }
    
    body.dark-mode .auth-content {
      background: #2a2a3a;
    }
    
    .close-modal {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #e74c3c;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: white;
      font-size: 1.2rem;
      transition: all 0.3s ease;
    }
    
    .close-modal:hover {
      background: #c0392b;
      transform: rotate(90deg);
    }
    
    .auth-form {
      display: flex;
      flex-direction: column;
      gap: 25px;
    }
    
    .form-title {
      text-align: center;
      margin-bottom: 20px;
      color: #1a2a6c;
      font-size: 2rem;
    }
    
    body.dark-mode .form-title {
      color: #5d8eff;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .form-group label {
      font-weight: 600;
      color: #2c3e50;
    }
    
    body.dark-mode .form-group label {
      color: #e0e0f0;
    }
    
    .form-group input {
      padding: 16px 25px;
      border-radius: 50px;
      border: 2px solid #e0e0e0;
      font-size: 1.1rem;
      transition: all 0.3s ease;
    }
    
    body.dark-mode .form-group input {
      background: #1e1e2a;
      border: 2px solid #3a3a4a;
      color: #f0f0f8;
    }
    
    .form-group input:focus {
      border-color: #3498db;
      outline: none;
      box-shadow: 0 0 15px rgba(52, 152, 219, 0.5);
    }
    
    body.dark-mode .form-group input:focus {
      border-color: #5d8eff;
      box-shadow: 0 0 15px rgba(93, 142, 255, 0.5);
    }
    
    .form-toggle {
      text-align: center;
      margin-top: 15px;
      color: #5a6268;
    }
    
    body.dark-mode .form-toggle {
      color: #b0b8c0;
    }
    
    .form-toggle a {
      color: #1a2a6c;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
    }
    
    body.dark-mode .form-toggle a {
      color: #5d8eff;
    }
    
    .form-message {
      padding: 15px;
      border-radius: 15px;
      margin-top: 15px;
      text-align: center;
      display: none;
    }
    
    .form-message.error {
      background: rgba(231, 76, 60, 0.2);
      color: #c0392b;
    }
    
    .form-message.success {
      background: rgba(46, 204, 113, 0.2);
      color: #27ae60;
    }
    
    body.dark-mode .form-message.error {
      background: rgba(231, 76, 60, 0.3);
      color: #ff8a80;
    }
    
    body.dark-mode .form-message.success {
      background: rgba(46, 204, 113, 0.3);
      color: #69f0ae;
    }
    
    /* Animation for word cards when added */
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .word-card {
      animation: slideIn 0.4s ease forwards;
    }
    
    /* Hindi font styling */
    .hindi-font {
      font-family: 'Noto Sans Devanagari', sans-serif;
      font-weight: 500;
    }
    
    /* Print screen protection */
    @media print {
      * {
        display: none !important;
      }
    }
    
    /* Security animations */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
      20%, 40%, 60%, 80% { transform: translateX(10px); }
    }
    
    .shake {
      animation: shake 0.5s;
    }
    
    @keyframes flash {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.2; }
    }
    
    .flash {
      animation: flash 0.3s 3;
    }
    
    .visit-counter {
      background: linear-gradient(to right, #3498db, #2ecc71);
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 15px;
      width: fit-content;
    }
    
    .benefits-container {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 25px;
      margin-top: 20px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .benefits-container h3 {
      color: white;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .benefits-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }
    
    .benefit-card {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
    }
    
    body.dark-mode .benefit-card {
      background: rgba(40, 40, 60, 0.9);
    }
    
    .benefit-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    
    .benefit-card i {
      font-size: 2rem;
      margin-bottom: 15px;
      color: #3498db;
    }
    
    .benefit-card h4 {
      margin-bottom: 10px;
      color: #2c3e50;
    }
    
    body.dark-mode .benefit-card h4 {
      color: #f0f0f0;
    }
    
    .benefit-card p {
      color: #5a6268;
      font-size: 0.95rem;
    }
    
    body.dark-mode .benefit-card p {
      color: #c0c8d0;
    }
    
    /* Box Breathing Animation */
    @keyframes boxBreath {
      0% { 
        transform: scale(1); 
        box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.5);
      }
      25% { 
        transform: scale(1.02); 
        box-shadow: 0 0 0 10px rgba(52, 152, 219, 0.3);
      }
      50% { 
        transform: scale(1.05); 
        box-shadow: 0 0 0 20px rgba(52, 152, 219, 0.2);
      }
      75% { 
        transform: scale(1.02); 
        box-shadow: 0 0 0 10px rgba(52, 152, 219, 0.3);
      }
      100% { 
        transform: scale(1); 
        box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.5);
      }
    }
    
    .box-breathing {
      animation: boxBreath 5s ease-in-out;
    }
    
    .breath-indicator {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 25px;
      z-index: -1;
      opacity: 0;
      pointer-events: none;
    }
    
    .breath-indicator.active {
      animation: pulse 5s ease-in-out;
    }
    
    @keyframes pulse {
      0% { 
        opacity: 0.3;
        box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.5);
      }
      25% { 
        opacity: 0.6;
        box-shadow: 0 0 0 20px rgba(52, 152, 219, 0.3);
      }
      50% { 
        opacity: 0.8;
        box-shadow: 0 0 0 40px rgba(52, 152, 219, 0.2);
      }
      75% { 
        opacity: 0.6;
        box-shadow: 0 0 0 20px rgba(52, 152, 219, 0.3);
      }
      100% { 
        opacity: 0;
        box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.5);
      }
    }
    
    @media (max-width: 1200px) {
      .main-content {
        flex-direction: column;
      }
      
      .words-container {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      }
    }
    
    @media (max-width: 768px) {
      .container {
        padding: 25px;
      }
      
      .header h1 {
        font-size: 2.2rem;
        margin-top: 15px;
      }
      
      .made-by {
        font-size: 1rem;
        padding: 6px 15px;
        top: -12px;
        left: 10px;
      }
      
      .theme-toggle {
        top: 15px;
        width: 45px;
        height: 45px;
      }
      
      .user-section {
        flex-direction: column;
        gap: 10px;
      }
      
      .user-btn {
        padding: 10px 15px;
        font-size: 1rem;
      }
      
      .input-section {
        flex-direction: column;
      }
      
      .word-text {
        font-size: 1.5rem;
      }
      
      .controls {
        flex-direction: column;
        align-items: center;
      }
      
      .preset-speeds {
        gap: 10px;
      }
      
      .preset-btn {
        padding: 12px 20px;
        font-size: 1rem;
      }
      
      .speed-control {
        width: 100%;
        justify-content: space-between;
      }
      
      .speed-control input {
        width: 180px;
      }
      
      .lens-btn {
        padding: 15px;
        font-size: 1rem;
      }
    }
    
    .visit-counter-container {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 100;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }
    
    .visit-counter-badge {
      background: linear-gradient(45deg, #1a2a6c, #b21f1f);
      color: white;
      padding: 10px 20px;
      border-radius: 50px;
      font-weight: 600;
      box-shadow: 0 6px 15px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      gap: 10px;
      transition: all 0.3s ease;
    }
    
    .visit-counter-badge:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    }
    
    .visit-counter-badge i {
      font-size: 1.2rem;
    }
    
    .security-watermark {
      position: fixed;
      bottom: 20px;
      right: 20px;
      color: rgba(255,255,255,0.1);
      font-size: 12px;
      pointer-events: none;
      z-index: 99;
      transform: rotate(-30deg);
      font-family: monospace;
    }
    
    .bg-animation {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }
    
    .bg-element {
      position: absolute;
      border-radius: 50%;
      opacity: 0.1;
      filter: blur(20px);
      animation: float 15s infinite linear;
    }
    
    @keyframes float {
      0% { transform: translate(0, 0) rotate(0deg); }
      100% { transform: translate(100vw, 100vh) rotate(360deg); }
    }
    
    .progress-bar {
      height: 8px;
      background: #e0e0e0;
      border-radius: 4px;
      margin-top: 10px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(to right, #2ecc71, #3498db);
      border-radius: 4px;
      width: 0%;
      transition: width 1s ease;
    }
    
    /* Firebase connection status */
    .firebase-status {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1000;
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
      background: rgba(255, 255, 255, 0.9);
      color: #333;
    }
    
    .firebase-status.connected {
      background: rgba(46, 204, 113, 0.9);
      color: white;
    }
    
    .firebase-status.disconnected {
      background: rgba(231, 76, 60, 0.9);
      color: white;
    }
    
    body.dark-mode .firebase-status {
      background: rgba(30, 30, 40, 0.9);
      color: white;
    }
  </style>
</head>
<body>
  <div class="firebase-status" id="firebaseStatus">
    <i class="fas fa-sync fa-spin"></i>
    Connecting to server...
  </div>
  
  <div class="bg-animation">
    <div class="bg-element" style="width: 300px; height: 300px; background: #3498db; top: 10%; left: 5%; animation-duration: 25s;"></div>
    <div class="bg-element" style="width: 200px; height: 200px; background: #e74c3c; top: 60%; left: 80%; animation-duration: 20s;"></div>
    <div class="bg-element" style="width: 150px; height: 150px; background: #2ecc71; top: 30%; left: 70%; animation-duration: 30s;"></div>
    <div class="bg-element" style="width: 250px; height: 250px; background: #9b59b6; top: 70%; left: 20%; animation-duration: 35s;"></div>
  </div>

  <div class="security-watermark">Made by Nirbhay</div>
  
  <div class="auth-modal" id="authModal">
    <div class="auth-content">
      <button class="close-modal" id="closeAuthModal">
        <i class="fas fa-times"></i>
      </button>
      <h2 class="form-title"><i class="fas fa-user-shield"></i> Secure Access</h2>
      <form class="auth-form" id="authForm">
        <div class="form-group">
          <label for="username"><i class="fas fa-user"></i> Username</label>
          <input type="text" id="username" placeholder="Enter your username" required>
        </div>
        <div class="form-group">
          <label for="password"><i class="fas fa-lock"></i> Password</label>
          <input type="password" id="password" placeholder="Enter your password" required minlength="4">
        </div>
        <div class="form-buttons">
          <button type="button" id="registerBtn" class="btn" style="background: linear-gradient(to right, #9b59b6, #8e44ad);">
            <i class="fas fa-user-plus"></i> Register
          </button>
          <button type="button" id="loginBtn" class="btn">
            <i class="fas fa-sign-in-alt"></i> Login
          </button>
        </div>
        <div id="authMessage" class="form-message"></div>
      </form>
      <div class="form-toggle">
        <p>Secure your progress with a personal account</p>
      </div>
    </div>
  </div>

  <div class="container" id="mainContainer">
    <div class="header">
      <div class="made-by">DEDICATED TO THE KNIGHTS </div>
      <!-- Theme toggle moved to top-right -->
      <button class="theme-toggle" id="themeToggle">
        <i class="fas fa-moon"></i>
      </button>
      <div class="user-section">
        <div class="user-info" id="userInfo">
          <span id="usernameDisplay">Guest</span>
          <button class="logout-btn" id="logoutBtn" title="Logout">
            <i class="fas fa-sign-out-alt"></i>
          </button>
        </div>
        <button class="user-btn" id="authBtn">
          <i class="fas fa-user"></i> Login/Register
        </button>
      </div>
      <h1>Hindi-English Dictation</h1>
      <p>Master difficult words for competitive exams like IAS, PCS, UPSI and more</p>
    </div>
    
    <div class="content-container">
      <div class="main-content">
        <div class="left-panel">
          <button class="lens-btn" id="lensBtn">
            <i class="fas fa-camera"></i> Add Words with Google Lens
          </button>
          
          <div class="language-selector">
            <button class="lang-btn active" id="hindiBtn"><span>Hindi</span></button>
            <button class="lang-btn" id="englishBtn"><span>English</span></button>
          </div>
          
          <div class="input-section" id="inputSection">
            <input type="text" id="wordInput" placeholder="Enter a difficult word...">
            <button class="btn" id="addWordBtn">
              <i class="fas fa-plus"></i> Add Word
            </button>
            <div class="breath-indicator" id="breathIndicator"></div>
          </div>
          
          <div class="words-container" id="wordsList">
            <div class="empty-state">
              <i class="fas fa-book-open"></i>
              <p>No words added yet</p>
              <div class="subtext">Add some words to get started on your learning journey!</div>
            </div>
          </div>
          
          <button class="btn btn-play-all" id="playAllBtn">
            <i class="fas fa-play-circle"></i> Play All Words
          </button>
          
          <div class="visit-counter">
            <i class="fas fa-eye"></i>
            <span id="visitCount">0</span> Visits
          </div>
        </div>
        
        <div class="right-panel">
          <!-- SPEED LABEL ADDED HERE -->
          <div class="speed-label">
            <i class="fas fa-tachometer-alt"></i> SPEED
          </div>
          
          <div class="controls">
            <div class="speed-control">
              <label for="speedControl"><i class="fas fa-sliders-h"></i> Adjustment:</label>
              <input type="range" id="speedControl" min="0.5" max="2" step="0.1" value="1">
              <span id="speedValue">1.0x</span>
            </div>
            <div class="preset-speeds">
              <button class="preset-btn" data-speed="0.156">25 WPM</button>
              <button class="preset-btn" data-speed="0.125">20 WPM</button>
              <button class="preset-btn" data-speed="0.187">30 WPM</button>
              <button class="preset-btn" data-speed="0.219">35 WPM</button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Exam Preparation Guide moved below -->
      <div class="instructions">
        <h3><i class="fas fa-graduation-cap"></i> Exam Preparation Guide:</h3>
        <ul>
          <li><strong>Add challenging words</strong> in your selected language (Hindi or English)</li>
          <li><strong>Login to save words</strong> to your personal account for future practice</li>
          <li><strong>Click the play button</strong> next to each word to hear it pronounced</li>
          <li><strong>Adjust the speed</strong> to make words easier or more challenging</li>
          <li><strong>Use preset buttons</strong> for specific speeds (25, 20, 30, 35 WPM)</li>
          <li><strong>Practice writing</strong> the words as you hear them</li>
          <li><strong>Delete words</strong> once you've mastered them</li>
          <li><strong>Try adding "BOX"</strong> to see a special breathing animation</li>
        </ul>
        
        <div class="benefits-container">
          <h3><i class="fas fa-crown"></i> Benefits of Creating an Account</h3>
          <div class="benefits-list">
            <div class="benefit-card">
              <i class="fas fa-cloud-upload-alt"></i>
              <h4>Cloud Storage</h4>
              <p>Save all your words securely in the cloud and access them from any device</p>
            </div>
            <div class="benefit-card">
              <i class="fas fa-chart-line"></i>
              <h4>Progress Tracking</h4>
              <p>Track your learning progress over time with detailed statistics</p>
              <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
              </div>
            </div>
            <div class="benefit-card">
              <i class="fas fa-sync-alt"></i>
              <h4>Sync Across Devices</h4>
              <p>Continue your learning seamlessly between phone, tablet, and computer</p>
            </div>
            <div class="benefit-card">
              <i class="fas fa-shield-alt"></i>
              <h4>Enhanced Security</h4>
              <p>Protect your learning materials with password authentication</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <footer>
      <i class="fas fa-shield-alt"></i> Protected Content | 
      <i class="fas fa-copyright"></i> 2024 SecureDictation | 
      <i class="fas fa-info-circle"></i> For best results, use Chrome or Edge browsers
    </footer>
    <footer>
  Made by THE KNIGHTS © 2024 | All rights reserved
</footer>

  </div>
  
  <div class="visit-counter-container">
    <div class="visit-counter-badge">
      <i class="fas fa-users"></i>
      <span id="floatingVisitCount">0</span> Users
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <script>
    // Firebase configuration - replace with your actual config
    const firebaseConfig = {
      apiKey: "AIzaSyD7kq9Fd8Lwj0mGdZ0z6Vf4Hq7YkXy6Z6A",
      authDomain: "hindi-english-dictation.firebaseapp.com",
      databaseURL: "https://hindi-english-dictation-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "hindi-english-dictation",
      storageBucket: "hindi-english-dictation.appspot.com",
      messagingSenderId: "123456789012",
      appId: "1:123456789012:web:abc123def456ghi789jkl0"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    document.addEventListener('DOMContentLoaded', function() {
      // DOM elements
      const wordInput = document.getElementById('wordInput');
      const addWordBtn = document.getElementById('addWordBtn');
      const wordsList = document.getElementById('wordsList');
      const playAllBtn = document.getElementById('playAllBtn');
      const hindiBtn = document.getElementById('hindiBtn');
      const englishBtn = document.getElementById('englishBtn');
      const speedControl = document.getElementById('speedControl');
      const speedValue = document.getElementById('speedValue');
      const presetButtons = document.querySelectorAll('.preset-btn');
      const themeToggle = document.getElementById('themeToggle');
      const mainContainer = document.getElementById('mainContainer');
      const authModal = document.getElementById('authModal');
      const closeAuthModal = document.getElementById('closeAuthModal');
      const registerBtn = document.getElementById('registerBtn');
      const loginBtn = document.getElementById('loginBtn');
      const logoutBtn = document.getElementById('logoutBtn');
      const authBtn = document.getElementById('authBtn');
      const usernameDisplay = document.getElementById('usernameDisplay');
      const authMessage = document.getElementById('authMessage');
      const lensBtn = document.getElementById('lensBtn');
      const usernameInput = document.getElementById('username');
      const passwordInput = document.getElementById('password');
      const visitCount = document.getElementById('visitCount');
      const floatingVisitCount = document.getElementById('floatingVisitCount');
      const progressFill = document.getElementById('progressFill');
      const inputSection = document.getElementById('inputSection');
      const breathIndicator = document.getElementById('breathIndicator');
      const firebaseStatus = document.getElementById('firebaseStatus');
      
      // State variables
      let currentLanguage = 'hindi';
      let words = [];
      let speechRate = 1;
      let isSpeaking = false;
      let currentSpeakingIndex = -1;
      let isDarkMode = false;
      let currentUser = null;

      // Initialize the app
      function initApp() {
        // Check Firebase connection
        const connectedRef = database.ref('.info/connected');
        connectedRef.on('value', function(snap) {
          if (snap.val() === true) {
            firebaseStatus.innerHTML = '<i class="fas fa-wifi"></i> Connected to server';
            firebaseStatus.className = 'firebase-status connected';
          } else {
            firebaseStatus.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Offline mode';
            firebaseStatus.className = 'firebase-status disconnected';
          }
        });
        
        // Check if user is already logged in
        const savedUser = localStorage.getItem('currentUser');
        if (savedUser) {
          currentUser = JSON.parse(savedUser);
          words = currentUser.words || [];
          updateUI();
          updateProgress();
        }
        
        // Set up event listeners
        setupEventListeners();
        
        // Render initial word list
        renderWordsList();
        
        // Set initial language
        setLanguage('hindi');
        
        // Load theme preference
        const savedTheme = localStorage.getItem('darkMode');
        if (savedTheme === 'true') {
          toggleTheme();
        }
        
        // Update visit counter
        updateGlobalVisitCounter();
      }
      
      // Update global visit counter using Firebase
      function updateGlobalVisitCounter() {
        const visitRef = database.ref('globalVisitCount');
        
        // Increment the count
        visitRef.transaction(function(currentCount) {
          return (currentCount || 0) + 1;
        }, function(error, committed, snapshot) {
          if (error) {
            console.error('Visit count update failed:', error);
            // Fallback to local count if Firebase fails
            updateLocalVisitCounter();
          } else if (committed) {
            // Update UI with new count
            const count = snapshot.val();
            visitCount.textContent = count;
            floatingVisitCount.textContent = count;
          }
        });
        
        // Also listen for real-time updates
        visitRef.on('value', function(snapshot) {
          const count = snapshot.val() || 0;
          visitCount.textContent = count;
          floatingVisitCount.textContent = count;
        });
      }
      
      // Fallback to local visit counter if Firebase fails
      function updateLocalVisitCounter() {
        let count = localStorage.getItem('localVisitCount');
        if (count === null) {
          count = 1;
        } else {
          count = parseInt(count) + 1;
        }
        localStorage.setItem('localVisitCount', count);
        visitCount.textContent = count;
        floatingVisitCount.textContent = count;
      }
      
      // Update progress bar
      function updateProgress() {
        const totalWords = words.length;
        const masteredWords = words.filter(word => word.mastered).length;
        const percentage = totalWords > 0 ? (masteredWords / totalWords) * 100 : 0;
        progressFill.style.width = `${percentage}%`;
      }
      
      // Set up all event listeners
      function setupEventListeners() {
        // Word management
        addWordBtn.addEventListener('click', addWord);
        playAllBtn.addEventListener('click', playAllWords);
        wordInput.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') addWord();
        });
        
        // Language selection
        hindiBtn.addEventListener('click', () => setLanguage('hindi'));
        englishBtn.addEventListener('click', () => setLanguage('english'));
        
        // Speed control
        speedControl.addEventListener('input', updateSpeed);
        
        // Preset speed buttons
        presetButtons.forEach(button => {
          button.addEventListener('click', function() {
            const speed = parseFloat(this.dataset.speed);
            speechRate = speed;
            speedControl.value = speed;
            speedValue.textContent = speed.toFixed(3) + 'x';
            
            // Update active state
            presetButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
          });
        });
        
        // Theme toggle
        themeToggle.addEventListener('click', toggleTheme);
        
        // Google Lens
        lensBtn.addEventListener('click', showLensInstructions);
        
        // Authentication
        closeAuthModal.addEventListener('click', () => authModal.classList.remove('show'));
        registerBtn.addEventListener('click', registerUser);
        loginBtn.addEventListener('click', loginUser);
        logoutBtn.addEventListener('click', logoutUser);
        authBtn.addEventListener('click', () => {
          authModal.classList.add('show');
          authBtn.style.display = currentUser ? 'none' : 'block';
        });
      }
      
      // Update speed display
      function updateSpeed() {
        speechRate = parseFloat(this.value);
        speedValue.textContent = speechRate.toFixed(1) + 'x';
        presetButtons.forEach(btn => btn.classList.remove('active'));
      }
      
      // Set active language
      function setLanguage(lang) {
        currentLanguage = lang;
        hindiBtn.classList.toggle('active', lang === 'hindi');
        englishBtn.classList.toggle('active', lang === 'english');
        wordInput.placeholder = lang === 'hindi' 
          ? 'कठिन हिंदी शब्द दर्ज करें...' 
          : 'Enter a difficult English word...';
        
        // Add Hindi font class for Devanagari script
        if (lang === 'hindi') {
          wordInput.classList.add('hindi-font');
        } else {
          wordInput.classList.remove('hindi-font');
        }
      }
      
      // Add word to list
      function addWord() {
        const word = wordInput.value.trim();
        if (!word) return;
        
        // Check if word already exists
        if (words.some(w => w.text === word && w.language === currentLanguage)) {
          showMessage('This word is already in your list!', 'error');
          return;
        }
        
        words.push({
          text: word,
          language: currentLanguage,
          mastered: false,
          addedDate: new Date().toISOString()
        });
        
        // Save words if user is logged in
        if (currentUser) {
          saveUserData();
          updateProgress();
        }
        
        // Trigger box breathing if word is "BOX"
        if (word.toUpperCase() === 'BOX') {
          triggerBoxBreathing();
        }
        
        renderWordsList();
        wordInput.value = '';
        wordInput.focus();
      }
      
      // Trigger box breathing animation
      function triggerBoxBreathing() {
        // Add breathing animation class
        inputSection.classList.add('box-breathing');
        breathIndicator.classList.add('active');
        
        // Remove animation after completion
        setTimeout(() => {
          inputSection.classList.remove('box-breathing');
          breathIndicator.classList.remove('active');
        }, 5000);
      }
      
      // Render words list
      function renderWordsList() {
        if (words.length === 0) {
          wordsList.innerHTML = `
            <div class="empty-state">
              <i class="fas fa-book-open"></i>
              <p>No words added yet</p>
              <div class="subtext">Add some words to get started on your learning journey!</div>
            </div>
          `;
          return;
        }
        
        wordsList.innerHTML = '';
        words.forEach((word, index) => {
          const wordElement = document.createElement('div');
          wordElement.className = `word-card ${word.language} ${currentSpeakingIndex === index ? 'speaking' : ''} ${word.mastered ? 'mastered' : ''}`;
          wordElement.innerHTML = `
            <div class="word-text">${word.text}</div>
            <div class="word-actions">
              <button class="action-btn play-btn" data-index="${index}">
                <i class="fas fa-volume-up"></i>
              </button>
              <button class="action-btn mark-btn ${word.mastered ? 'mastered' : ''}" data-index="${index}">
                <i class="${word.mastered ? 'fas fa-check-circle' : 'far fa-circle'}"></i>
              </button>
              <button class="action-btn delete-btn" data-index="${index}">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          `;
          wordsList.appendChild(wordElement);
        });
        
        // Add event listeners to action buttons
        document.querySelectorAll('.play-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const index = parseInt(this.getAttribute('data-index'));
            speakWord(words[index], index);
          });
        });
        
        document.querySelectorAll('.mark-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const index = parseInt(this.getAttribute('data-index'));
            words[index].mastered = !words[index].mastered;
            if (currentUser) {
              saveUserData();
              updateProgress();
            }
            renderWordsList();
          });
        });
        
        document.querySelectorAll('.delete-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const index = parseInt(this.getAttribute('data-index'));
            // If currently speaking this word, stop speech
            if (currentSpeakingIndex === index) {
              window.speechSynthesis.cancel();
              isSpeaking = false;
              currentSpeakingIndex = -1;
            }
            words.splice(index, 1);
            
            // Save words if user is logged in
            if (currentUser) {
              saveUserData();
              updateProgress();
            }
            
            renderWordsList();
          });
        });
      }
      
      // Speak a single word
      function speakWord(word, index) {
        if ('speechSynthesis' in window) {
          // Cancel any ongoing speech
          window.speechSynthesis.cancel();
          
          const utterance = new SpeechSynthesisUtterance(word.text);
          
          // Set language based on word
          utterance.lang = word.language === 'hindi' ? 'hi-IN' : 'en-US';
          utterance.rate = speechRate;
          
          // Set speaking state
          isSpeaking = true;
          currentSpeakingIndex = index;
          renderWordsList();
          
          // Highlight the word while speaking
          utterance.onstart = function() {
            currentSpeakingIndex = index;
            renderWordsList();
          };
          
          utterance.onend = function() {
            isSpeaking = false;
            currentSpeakingIndex = -1;
            renderWordsList();
          };
          
          utterance.onerror = function() {
            isSpeaking = false;
            currentSpeakingIndex = -1;
            renderWordsList();
            showMessage('Error pronouncing the word. Please try again or use a different browser.', 'error');
          };
          
          window.speechSynthesis.speak(utterance);
        } else {
          showMessage('Text-to-speech is not supported in your browser. Try using Chrome or Edge.', 'error');
        }
      }
      
      // Play all words in sequence
      function playAllWords() {
        if (words.length === 0) {
          showMessage('Please add some words first!', 'error');
          return;
        }
        
        if (isSpeaking) {
          window.speechSynthesis.cancel();
          isSpeaking = false;
          currentSpeakingIndex = -1;
          renderWordsList();
          playAllBtn.innerHTML = '<i class="fas fa-play-circle"></i> Play All Words';
          return;
        }
        
        let index = 0;
        
        function playNextWord() {
          if (index >= words.length) {
            isSpeaking = false;
            currentSpeakingIndex = -1;
            renderWordsList();
            playAllBtn.innerHTML = '<i class="fas fa-play-circle"></i> Play All Words';
            return;
          }
          
          speakWord(words[index], index);
          index++;
          
          // Wait for the current word to finish before playing the next
          const checkEnd = setInterval(() => {
            if (!isSpeaking) {
              clearInterval(checkEnd);
              setTimeout(playNextWord, 500);
            }
          }, 100);
        }
        
        playAllBtn.innerHTML = '<i class="fas fa-stop"></i> Stop Playback';
        playNextWord();
      }
      
      // Toggle dark/light mode
      function toggleTheme() {
        isDarkMode = !isDarkMode;
        document.body.classList.toggle('dark-mode', isDarkMode);
        
        // Update icon
        const icon = themeToggle.querySelector('i');
        icon.classList.toggle('fa-moon', !isDarkMode);
        icon.classList.toggle('fa-sun', isDarkMode);
        
        // Save preference
        localStorage.setItem('darkMode', isDarkMode);
      }
      
      // Register user
      function registerUser() {
        const username = usernameInput.value.trim();
        const password = passwordInput.value.trim();
        
        if (!username || !password) {
          showAuthMessage('Please enter both username and password', 'error');
          return;
        }
        
        if (password.length < 4) {
          showAuthMessage('Password must be at least 4 characters', 'error');
          return;
        }
        
        // Get existing users or initialize empty array
        const users = JSON.parse(localStorage.getItem('dictationUsers')) || [];
        
        // Check if user already exists
        const userExists = users.some(u => u.username === username);
        
        if (userExists) {
          showAuthMessage('Username already exists!', 'error');
          return;
        }
        
        // Create new user
        const newUser = {
          username,
          password,
          words: [],
          createdAt: new Date().toISOString()
        };
        
        users.push(newUser);
        localStorage.setItem('dictationUsers', JSON.stringify(users));
        
        // Log the user in
        currentUser = newUser;
        words = currentUser.words;
        saveUserData();
        updateUI();
        
        showAuthMessage('Account created successfully!', 'success');
        
        // Close modal after delay
        setTimeout(() => {
          authModal.classList.remove('show');
        }, 1500);
      }
      
      // Login user
      function loginUser() {
        const username = usernameInput.value.trim();
        const password = passwordInput.value.trim();
        
        if (!username || !password) {
          showAuthMessage('Please enter both username and password', 'error');
          return;
        }
        
        // Get existing users
        const users = JSON.parse(localStorage.getItem('dictationUsers')) || [];
        
        // Find user
        const foundUser = users.find(u => u.username === username && u.password === password);
        
        if (foundUser) {
          currentUser = foundUser;
          words = foundUser.words || [];
          saveUserData();
          updateUI();
          updateProgress();
          
          showAuthMessage('Login successful!', 'success');
          
          // Close modal after delay
          setTimeout(() => {
            authModal.classList.remove('show');
          }, 1000);
        } else {
          showAuthMessage('Invalid username or password', 'error');
        }
      }
      
      // Logout user
      function logoutUser() {
        currentUser = null;
        words = [];
        localStorage.removeItem('currentUser');
        updateUI();
        authBtn.style.display = 'block';
        progressFill.style.width = '0%';
      }
      
      // Save user data
      function saveUserData() {
        if (!currentUser) return;
        
        // Update user data in storage
        const users = JSON.parse(localStorage.getItem('dictationUsers')) || [];
        const userIndex = users.findIndex(u => u.username === currentUser.username);
        
        if (userIndex !== -1) {
          users[userIndex].words = words;
          localStorage.setItem('dictationUsers', JSON.stringify(users));
        }
        
        // Save current user session
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
      }
      
      // Update UI based on authentication state
      function updateUI() {
        if (currentUser) {
          // Update username display
          usernameDisplay.textContent = currentUser.username;
          authBtn.style.display = 'none';
          
          // Render words
          renderWordsList();
        } else {
          // Reset UI for guest
          usernameDisplay.textContent = 'Guest';
          authBtn.style.display = 'block';
          words = [];
          renderWordsList();
        }
      }
      
      // Show Google Lens instructions
      function showLensInstructions() {
        alert('To add words with Google Lens:\n1. Install Google Lens app\n2. Capture text from books\n3. Copy and paste the words here');
      }
      
      // Show authentication message
      function showAuthMessage(message, type) {
        authMessage.textContent = message;
        authMessage.className = `form-message ${type}`;
        authMessage.style.display = 'block';
        
        // Clear message after 3 seconds
        setTimeout(() => {
          authMessage.style.display = 'none';
        }, 3000);
      }
      
      // Show general message
      function showMessage(message, type) {
        // Create message element
        const messageEl = document.createElement('div');
        messageEl.className = `form-message ${type}`;
        messageEl.textContent = message;
        messageEl.style.position = 'fixed';
        messageEl.style.top = '20px';
        messageEl.style.left = '50%';
        messageEl.style.transform = 'translateX(-50%)';
        messageEl.style.zIndex = '1000';
        messageEl.style.padding = '15px 30px';
        messageEl.style.borderRadius = '50px';
        messageEl.style.fontWeight = '600';
        
        document.body.appendChild(messageEl);
        
        // Remove message after 3 seconds
        setTimeout(() => {
          messageEl.style.opacity = '0';
          setTimeout(() => {
            document.body.removeChild(messageEl);
          }, 300);
        }, 3000);
      }
      
      // Initialize the application
      initApp();
      
      // Security features
      document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        document.body.classList.add('shake');
        setTimeout(() => document.body.classList.remove('shake'), 500);
      });
      
      document.addEventListener('selectstart', function(e) {
        e.preventDefault();
        document.body.classList.add('flash');
        setTimeout(() => document.body.classList.remove('flash'), 1000);
      });
      
      window.addEventListener('beforeprint', function() {
        document.body.innerHTML = '<div style="padding: 100px; text-align: center; font-size: 24px;"><i class="fas fa-ban" style="font-size: 48px; margin-bottom: 20px;"></i><p>Printing disabled for security</p></div>';
      });
    });
  </script>
  <script>
  document.addEventListener('contextmenu', e => e.preventDefault());
  document.addEventListener('selectstart', e => e.preventDefault());
</script>

</body>
</html>
